---
layout: post
category : 日记
tags : [日记]
---
好吧，虽然刚刚晚上，但是白天干什么事儿赶脚已经想不起来了，真是老了。

早上一来听说无线组调整了JVM的参数，把新生代调小到4:6了，感觉GC的效果有提升。我把主站这边的也找了一台调整了一下，感觉gc的次数、时间都有缩短，也大概印证了我之前的猜测。对于这种系统中有大量缓存的情况，他们会持续占用老生代的空间，导致老生代实际可以容纳的空间有限，所以full gc的频率会提高。扩大老生代，虽然会导致full gc时间可能延长，但是同时也为临时晋升到老生代的对象提供了一个更大的池子。其实最理想的还是像阿里原来开源的那样，把这种应用服务器生存期间会一直存在的缓存对象扔到堆外去，自己管理，回头找组内的同学研究下。

今天临时插进来一个新的需求，可怜我原来的需求断断续续做了快一个多月了，哈哈。在做的时候，还是原来的那个感觉，业务逻辑的梳理不够清晰，这次的重构jl同学花了不少功夫，但是感觉只是完成的第一个阶段，把业务代码进行了第一层的抽离。但是还是有很多被纠缠在一起，按照我理想的设计，每个方法、对象，都完成自己设计上的特定功能，排序的就做排序的事情，过滤的就做过滤的事情，不要贪图少写一个循环，就把业务代码硬塞到一起，我觉得这是得不偿失。不能证明是性能瓶颈的地方，就不要害怕因为代码的整洁清晰而影响性能！
