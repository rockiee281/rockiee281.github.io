---
layout: post
category : 日记
tags : [日记]
---
开始写开发日记第二天就忘了……罪过罪过，今天晚上下班可别忘记了。

18号遇到的一个问题，就是业务模型的设计。我们和前端的交互是走ajax异步轮询的机制，返回数据的时候会判断有新数据就返回，否则不做处理。但是现在我们从单一的结果集变成了多个结果集，如果某个结果集有数据更新回数了，其他结果集都是空的，就会在前端把一些航班报价给刷掉，那就死翘翘了。所以需要设计一个更合适的数据更新机制，最好是增量的处理。

由此想起来，对于业务系统设计的关键就是计算模型的抽象，用老的不能再老土的话说就是高内聚低耦合，子系统之间边界清晰接口明确。减少系统内的状态，state is evil！状态越少，系统中产生BUG的几率也就越低，特别是并发的环境下，所以最近越来越想尝试函数式语言，比如erlang或者Scala也是个不错的选择？

今天又遇到无线的一个机器heap撑爆无法gc了，抓了个dump赶紧分析分析吧。jprofiler没办法分析这种超过4个G的dump，真是郁闷啊。eclipse memory analyzer还是不够好用。
