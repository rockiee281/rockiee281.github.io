---
layout: post
category : opensource project
tags : [android,cobub razor]
---
razor的服务器端需要完成数据的采集、统计分析、展示的工作。数据采集依赖于提供的api接受client发回的数据，统计分析是依赖于mysql数据库的存储过程来完成的，而数据的展示则是依靠一个php开发的后台实现，里面大量的报表展示和导出，还是非常不错的。

#数据分库
razor有两个database，分别是原始数据和数据的data warehouse，这里我们把两个库的名字分别命名为razor和razordw。
##原始数据
    +------------------------+
    | Tables_in_razor        |
    +------------------------+
    | razor_alert            |
    | razor_alertdetail      |
    | razor_cell_towers      |
    | razor_channel          |
    | razor_channel_product  |
    | razor_ci_sessions      |
    | razor_clientdata       |
    | razor_clientusinglog   |
    | razor_config           |
    | razor_errorlog         |
    | razor_event_defination |
    | razor_eventdata        |
    | razor_login_attempts   |
    | razor_markevent        |
    | razor_mccmnc           |
    | razor_networktype      |
    | razor_platform         |
    | razor_product          |
    | razor_product_category |
    | razor_product_version  |
    | razor_productfiles     |
    | razor_reportlayout     |
    | razor_target           |
    | razor_targetevent      |
    | razor_user2role        |
    | razor_user_autologin   |
    | razor_user_permissions |
    | razor_user_profiles    |
    | razor_user_resources   |
    | razor_user_roles       |
    | razor_users            |
    | razor_wifi_towers      |
    +------------------------+
###客户端基本信息表 razor_cliendata
clientdata中保存了用户设备的基本信息，每次在客户端调用了`postClientData()`会发送一条数据库到服务器端并保存到clientdata表。
###事件信息表 razor_event
##数据仓库

#存储过程
razor的数据处理是通过存储过程来定时完成的，分为hourly、daily、weekly、monthly4个任务，还有一个laterdata。

##hourly任务
hourly任务每小时执行一次，主要是用来将原始数据导入数据仓库中。
原始数据表中，
